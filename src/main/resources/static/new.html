<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>새 할일</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="container">
        <h2>새 할일</h2>

        <input id="title" placeholder="제목">
        <textarea id="description" placeholder="설명"></textarea>

        <button onclick="saveTodo()">저장</button>
        <button class="secondary" onclick="history.back()">취소</button>
    </div>

    <script src="/js/app.js"></script>
    <script>
        async function saveTodo() {
            const title = document.getElementById("title").value.trim();
            const description = document.getElementById("description").value.trim();

            const res = await fetch("/api/todos", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Accept": "application/json"
                },
                body: JSON.stringify({ title, description })
            });
            
            if (!res.ok) {
                const text = await res.text();
                alert("저장 실패:\n" + text);
                return;
            }
            
            location.href = "index.html";
        }
    </script>
</body>
</html>