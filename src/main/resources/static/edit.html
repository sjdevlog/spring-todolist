<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>할일 수정</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <h2>할일 수정</h2>

    <input id="title">
    <textarea id="description"></textarea>

    <button onclick="updateTodo()">수정</button>
    <button onclick="history.back()">취소</button>

    <script src="/js/app.js"></script>
    <script>
        const id = new URLSearchParams(location.search).get("id");

        fetch(`/api/todos/${id}`)
            .then(res => res.json())
            .then(todo => {
                document.getElementById("title").value = todo.title;
                document.getElementById("description").value = todo.description;
            });
        
        function updateTodo() {
            fetch(`/api/todos/${id}`, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    title: document.getElementById("title").value,
                    description: document.getElementById("description").value
                })
            }).then(() => location.href = "index.html");
        }
    </script>
</body>
</body>
</html>